{% extends 'subnetting.html' %}
{% import 'form.html' as my_form %}

{% block form %}
    {{ my_form.network_form(context.network, context.sizes) }}
{% endblock %}

{% block alert %}{% endblock %}

{% block network_info %}
    <h2>Информация об исходной сети</h2>

    <div id="network-info" class="table-responsive">
        <table class="table table-bordered table-striped .table-condensed">
            <tr>
                <th class="">Cеть</th>
                <td>{{ context.network.compressed }}</td>
            </tr>
            <tr>
                <th>Количество доступных адресов</th>
                <td>{{ context.network.num_addresses - 2}}</td>
            </tr>
            <tr>
                <th>Количество необходимых адресов</th>
                <td>{{ context.sizes | sum }}</td>
            </tr>
            <tr>
                <th>Количество использованных адресов</th>
                <td>{{ context.dedicated }}</td>
            </tr>
            <tr>
                <th>Количество свободных адресов</th>
                <td>{{ context.network.num_addresses - context.dedicated }}</td>
            </tr>
        </table>
    </div>
{% endblock %}

{% block required_info %}
    <h2>Информация о выделенных IP-адресов</h2>

    <div id="hosts" class="table-responsive">
        <table class="table table-bordered table-striped table-hover">
            <tr class="success">
                <th>Размер</th>
                <th>Выделенный размер</th>
                <th>Адрес</th>
                <th>Маска</th>
                <th>Десятичная маска</th>
                <th>Бродкаст</th>
                <th>Диапазон адресов</th>
            </tr>
            {% for size, network in context.networks %}
                <tr>
                    <td>{{ size }}</td>
                    <td>{{ network.num_addresses - 2 }}</td>
                    <td>{{ network.network_address }}</td>
                    <td>{{ network.prefixlen }}</td>
                    <td>{{ network.netmask }}</td>
                    <td>{{ network.broadcast_address }}</td>
                    <td>{{ network.network_address + 1 }} - {{ network.broadcast_address - 1 }}</td>
                </tr>
            {% endfor %}
        </table>
    </div>
{% endblock %}
